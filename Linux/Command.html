<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>Linux Command - Wiki | jinshuai86</title>
    <meta name="keywords" content="Java,Operation System,Network,Tool"/>
    <meta name="description" content="jinshuai's personal wiki"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/wiki/">Home</a>&nbsp;&#187;&nbsp;<a href="/wiki/#Linux">Linux</a>&nbsp;&#187;&nbsp;Linux Command
    <span class="updated">Page Updated&nbsp;
      2019-04-05
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">Linux Command</div>

  <h1 id="_1">文件处理</h1>
<p>涉及到查找文件、将文件内容加载到内存中进行操作。</p>
<h2 id="find">find</h2>
<p>用于查找文件，比如 <code>find / -name *.java</code> 查找根目录下的所有java文件</p>
<h3 id="_2">参数</h3>
<ul>
<li>
<p>-name 按名称查找<br />
<code>find /home/js/ -name test</code> 查找/home/js/目录下的test文件</p>
</li>
<li>
<p>-type 按类型查找(f(file)、d(directory)、l(link))<br />
<code>find /home/js/ -type d</code> 查找/home/js/目录下的类型是<strong>目录</strong>的文件</p>
</li>
<li>
<p>-atime/mtime 按访问时间/修改时间查找<br />
<code>find /home/js -atime -7</code> 查找/home/js/目录下访问时间在7天以内的文件</p>
</li>
<li>
<p>-size 按大小查找(k(KB)、m(MB)、g(GB))<br />
<code>find /home/js -size -1k</code> 查找/home/js/目录下大小小于1KB的文件</p>
</li>
<li>
<p>-perm 按权限查找(4(r)、2(w)、1(x))<br />
<code>find /home/js -perm 444</code> 查找/home/js/目录下只读的文件</p>
</li>
</ul>
<h2 id="grep">grep</h2>
<p>查找文件中包含的关键字，最终显示的是包含关键字的所有行，比如 <code>grep "find" Command.md</code> 在Command.md中查找包含"find"关键字的行</p>
<h3 id="_3">参数</h3>
<ul>
<li>-e 多个模式匹配<br />
<code>grep -e "find" -e "test" Command.md</code> 在Command.md中查找包含"find"和"test"关键字的行</li>
<li>-i 忽略大小写</li>
<li>-c(count) 打印包含的关键字的数量</li>
<li>-n 显示关键字所在的行号</li>
</ul>
<h2 id="sort">sort</h2>
<p>对文件中的内容进行排序，排序在内存中进行，不会修改源文件。 比如 <code>sort /home/test</code> 默认是按字典序排序(-d)</p>
<h3 id="_4">参数</h3>
<ul>
<li>
<p>-n 按数字排序(前提是test里的文本是数字，且要排序的多个数字不能在同一行)<br />
<code>sort -n /home/js/test</code> 对test里的每行内容按数字顺序排序 </p>
</li>
<li>
<p>-d 按字典序(要排序的多个字符串不能在同一行)<br />
<code>sort -d /home/js/test</code> 对test里的每行内容按字典顺序排序 </p>
</li>
<li>
<p>-k N 表示每行按第N列排序(<strong>列与列之间要用空格隔开</strong>)<br />
<code>sort -k 1 /home/js/test</code> 对test里的每行按第 1 列排序</p>
</li>
<li>
<p>-r 和其它参数组合实现逆序排序<br />
<code>sort -r -k 1 /home/js/test</code> 对test里的每行按第 1 列逆序排序</p>
</li>
</ul>
<h2 id="uniq">uniq</h2>
<p>过滤掉相邻的重复行，<strong>重复行需要相邻(需要先用sort排序，使得重复行相邻)。</strong> 比如 <code>sort /home/test | uniq</code> 输出去除重复行的内容</p>
<h3 id="_5">参数</h3>
<ul>
<li>-i 忽略大小写</li>
<li>-d 输出重复行</li>
<li>-D 输出所有重复行</li>
<li>-c 计算相同行的数量</li>
</ul>
<h2 id="trtransfer">tr(transfer)</h2>
<p>转换文本中的内容，转换在内存中进行，不会修改源文件。 需要将其它程序的输出作为输入进行处理。 <code>less test | tr a b &gt; out</code> 将less获取的输出作为输入，然后将其中的a转换成b输出到out中。</p>
<h3 id="_6">参数</h3>
<ul>
<li>
<p>-s 将<strong>连续的</strong>字符或者字符串转换成指定字符或者字符串<br />
<code>less test | tr -s 'ab' 'b'</code> 将test中连续的ab替换成b的内容作为输出</p>
</li>
<li>
<p>-d 删除字符<br />
<code>less test | tr -d a</code> 删除test中出现的a字符的内容作为输出</p>
</li>
</ul>
<h2 id="cut">cut</h2>
<p>截取每一行中指定的字节/字符/列，截取在内存中进行，不会修改源文件。比如：<code>cut -c 1-3 test</code>，截取test中每一行的第一字符<strong>至</strong>第三字符。</p>
<h3 id="_7">参数</h3>
<ul>
<li>
<p>-b 按字节截取<br />
<code>cut -b 1-3 test</code> 截取test中每一行的第一字节<strong>至</strong>第三字节。</p>
</li>
<li>
<p>-d 按指定分隔符截取，-f 按字段截取。每一行的列与列之间通过<code>-d</code>区分，否则会当成一个字段<br />
<code>cut -d ' ' -f 1-3 test</code> 截取test中每一行中的第一列<strong>至</strong>第三列,列与列之间以空格作为间隔</p>
</li>
</ul>
<h2 id="paste">paste</h2>
<p>将多个文件中的内容水平拼接在一块，文件与文件之间的内容默认是以制表符作为间隔。比如：<code>paste test test2</code> 将test和test2中的内容拼接在一起</p>
<h3 id="_8">参数</h3>
<ul>
<li>
<p>-d 自定义文件之间的间隔符<br />
<code>paste -d '|' test test2</code> 用 <code>|</code>作为test和test2的间隔符。</p>
</li>
<li>
<p>-s 一次性读取完一个文件作为一行，文件之间垂直拼接<br />
<code>paste -s test test2</code> 先从左到右，从上到下读取完test中的内容放到第一行，然后再从左到右，从上到下读取test2中的内容放到下一行。</p>
</li>
</ul>
<h2 id="wc">wc</h2>
<p>统计文件中的字节数/字符数/单词数量/行数。 比如 <code>wc -w test</code>统计test中的单词数量</p>
<h3 id="_9">参数</h3>
<ul>
<li>-c 统计字节数量</li>
<li>-m 统计字符数量</li>
<li>-w 统计单词数量</li>
<li>-l 统计行数</li>
</ul>
<hr />
<h1 id="_10">系统信息</h1>
<p>查看机器的运行状态，比如进程快照信息，IO信息，内存/磁盘使用情况。</p>
<h2 id="psprocess-status">ps(process status)</h2>
<p>查看进程状态<strong>快照</strong>，比如<code>ps -aux|grep java</code> 打印关于Java进程的快照</p>
<h3 id="_11">参数</h3>
<ul>
<li>-aux/-ef 查看系统正在运行的<strong>所有</strong>进程快照<br />
标准的语法： <code>ps -ef</code>  <br />
基于BSD的语法: <code>ps -aux</code>  </li>
</ul>
<h2 id="top">top</h2>
<p>实时监控进程状态信息。并且可以交互(按P则会按照CPU使用率排序，按M则会按内存使用率排序)。比如 <code>top -u js</code> 实时查看用户<code>js</code>开启的进程信息</p>
<h3 id="_12">参数</h3>
<ul>
<li>-p pid 实时监控进程号为<code>pid</code>的进程信息<br />
<code>top -p 20348</code> 监控进程号为<code>20348</code>的进程信息</li>
<li>-Hp pid 实时监控进程号为<code>pid</code>的<strong>线程</strong>状态<br />
<code>top -Hp 20348</code> 监控进程号为<code>20348</code>的进程内部的线程状态</li>
<li>-d seconds 每seconds秒刷新一次</li>
</ul>
<h2 id="du">du</h2>
<p>查看某个目录中所有文件大小。 比如 <code>du js -h</code> 查看js目录中文件占用空间大小。</p>
<h3 id="_13">参数</h3>
<ul>
<li>-c 最后列出这个目录的总大小</li>
<li>-h 可读性更好一些</li>
<li>-s 只输出当前目录的大小，不会递归输出子目录的大小。</li>
</ul>
<h2 id="lsoflist-open-files">lsof(list open files)</h2>
<p>查看打开的文件，比如 <code>lsof -p 23478</code> 查看进程号为<code>23478</code>打开的文件</p>
<h3 id="_14">参数</h3>
<ul>
<li>-i [46][protocol][@hostname|hostaddr][:service|port] 列出具有指定网络地址的文件(网络地址包括网络层协议版本IPV6/4、运输层协议类型TCP/UDP、主机名、端口号。这几个是可选的，如果不写就默认所有)<br />
<code>lsof -i :80</code> 列出网络地址中网络层是IPV6或IPV4并且运输层是TCP或UDP并且主机名是任意的，<strong>但是占用的端口号是80的文件</strong>。 意思就是查看占用80端口的进程。</li>
<li>-u user 查看指定用户打开的文件<br />
<code>lsof -u js</code> 查看用户<code>js</code>打开的文件</li>
<li>-p pid 查看指定<strong>进程号</strong>打开的文件<br />
<code>lsof -p 23478</code> 查看进程号为<code>23478</code>打开的文件</li>
<li>-c command 查看指定<strong>进程</strong><br />
<code>lsof -c java</code> 查看命令为<code>java</code>的打开的文件</li>
<li><code>+</code>d directory 查看指定目录下被打开的文件 <code>+</code>D加上递归<br />
<code>lsof +d /home/js/workspace</code> 查看/home/js/workspace下被打开的文件</li>
</ul>
<h2 id="free">free</h2>
<p>查看内存及交换区使用情况 比如 <code>free -b</code> 以字节的形式显示内存使用情况</p>
<h3 id="_15">参数</h3>
<ul>
<li>-b 以字节(B)形式显示</li>
<li>-k 以千字节(KB)形式显示 </li>
<li>-m 以兆字节(MB)形式显示</li>
<li>-g 以吉字节(GB)形式显示</li>
</ul>
<h2 id="sar">sar</h2>
<p>监控CPU使用率、内存使用率、磁盘IO情况、网卡工作情况 比如 <code>sar -b 1 2</code> 查看磁盘IO情况，每一秒显示一次，共显示两次。(需要开启系统监控: 修改<code>/etc/default/sysstat</code>中的<code>ENABLED=true</code>)</p>
<h3 id="_16">参数</h3>
<ul>
<li>-q 查看运行队列中进程数量、进程总数量、系统平均负载(单位时间内(等待队列中进程数量+运行队列中进程数量) / CPU最高能处理的进程数量)。单核负载=负载/CPU总核数。每个核的负载在0.7左右比较正常。</li>
<li>-u 查看CPU的使用率</li>
<li>-r 内存使用情况</li>
</ul>
<h1 id="_17">网络工具</h1>
<p>查看网络信息，比如查看处于不同连接状态(运输层是TCP/UDP、已经建立或者正在监听)的连接。发送网络请求</p>
<h2 id="netstat">netstat</h2>
<p>查看网络连接状态信息。比如 <code>netstat -t</code> 查看已经建立的TCP连接信息</p>
<h3 id="_18">参数</h3>
<ul>
<li>-a 查看所有状态的连接(已经建立、正在监听)</li>
<li>-t 查看已经建立的TCP连接信息</li>
<li>-u 查看已经建立的UDP连接信息</li>
<li>-l 查看处于监听状态的连接</li>
<li>-n 不解析名称，加上后，端口号以数字显示</li>
<li>-p 查看处于当前连接的进程名/进程ID <blockquote>
<p><code>netstat -tp</code> 查看协议是TCP的进程名<br />
<code>netstat -np | grep nginx</code> 查看和<code>nginx</code>进程有关的端口号(本地端口、远程端口)<br />
<code>netstat -np | grep 80</code> 查看和<code>80</code>端口号有关的连接(<strong>不一定是占用</strong>，可能请求的远程地址对应的端口也是80)<br />
<code>netstat -ntlp | grep</code> <code>nginx</code>进程正在监听的端口号</p>
</blockquote>
</li>
</ul>
<h2 id="curl">curl</h2>
<p>重点是模拟发送网络请求(HTTP、FTP、SCP、POP3、SMTP...)，不是下载数据。 默认重定向到标准输出。</p>
<h3 id="_19">参数</h3>
<ul>
<li>
<p>-H 指定请求头 -X指定请求方法</p>
<p><code>curl -H 'Content-Type: application/json' -XPOST https://www.baidu.com</code></p>
</li>
<li>
<p>-o/O 指定保存的文件名/使用请求的文件的文件名<br />
<code>curl -o test.html jinshuai86.github.io/wiki/Linux/Command.html</code> 将<code>Command.html</code>中的内容保存到<code>test.html</code>中<br />
<code>curl -O jinshuai86.github.io/wiki/Linux/Command.html</code> 将<code>Command.html</code>中的内容保存到本地文件，本地文件的文件名为<code>Command.html</code>。  </p>
</li>
<li>-L 重定向。比如遇到<code>301</code>、<code>302</code>时，<code>curl</code>默认不会重定向到<code>location header</code>中的<code>URL</code>，加上<code>-L</code>就会重定向到<code>location header</code>中的<code>URL</code>。<br />
<code>curl jinshuai86.github.io/about</code>请求的内容是<code>301</code>页面，加上<code>-L</code>即可重定向到新的页面。</li>
<li>-C 对大文件的下载支持断点续传。 注意下载文件要用 <code>-o/O</code>，<code>C</code>和<code>o/O</code>之间有<code>-</code>分隔<br />
<code>curl -C - -O http://www.gnu.org/software/gettext/manual/gettext.html</code></li>
<li>-d/--data 模拟发送HTTP POST请求 加上<code>-urlencode</code>会对特殊字符进行转义比如<code>空格=&gt;%20</code><br />
<code>curl -d-urlencode "username=jin shuai&amp;password=123" http://jinshuai86.github.io</code></li>
<li>-D 获取服务器要在本地设置的<code>cookie</code>。 比如 <code>curl -D cookie https://www.github.com</code>将要设置的<code>cookie</code>保存到<code>cookie</code>文件中</li>
<li>-b 发送请求时，使用cookie。可以使用通过<code>-D</code>设置的cookie。比如 <code>curl -b cookie https://www.github.com</code></li>
</ul>
<h2 id="wget">wget</h2>
<p>下载数据，相对<code>curl</code>，<code>wget</code>支持递归下载</p>
<h3 id="_20">参数</h3>
<ul>
<li>-r 进行递归下载，将当前页面内包含的其它链接内容也一并下载下来</li>
<li>--reject=filetype,filetype 不下载执行类型的文件。多个类型用<code>,</code>隔开。 比如<code>wget --reject=css,js jinshuai86.github.io/about</code> 不下载<code>css</code>和<code>js</code>类型的文件  </li>
<li>--accept=filetype,filetype 只下载指定类型的文件。多个类型用<code>,</code>隔开。</li>
</ul>
<h2 id="scp">scp</h2>
<p>远程传输文件，基于<code>SSH</code>协议。<code>scp</code>相对于<code>ftp</code>、<code>rsync</code>，传输速度较快，对系统影响不大。<br />
比如 <code>scp localfile remoteIP:folder</code> 将<strong>本地文件</strong><code>localfile</code>传输到IP地址为<code>remoteIP</code>的<code>foler</code>文件夹中<br />
<code>Windows</code>下有图形界面的<code>winscp</code>工具支持<code>scp</code></p>
<h3 id="_21">参数</h3>
<ul>
<li>-r 递归传输整个目录</li>
</ul>
<h3 id="_22">常用</h3>
<h4 id="_23">上传本地文件到远程服务器</h4>
<p><code>scp -r upload 114.114.114.114:~/download</code> 将本地文件夹<code>upload</code>传输到<code>114.114.114.114</code>的<code>~/download</code>文件夹  </p>
<h4 id="ssh">复制远程服务器文件到本地(远程需要开SSH服务)</h4>
<p><code>scp 114.114.114.114:~/upload/note.md ~/download</code> 将远程<code>114.114.114.114</code>的<code>node.md</code>下载到本地的<code>~/download</code>目录  </p>
<h2 id="nmap">nmap</h2>
<p>扫描服务器端口信息， 比如 <code>nmap ip -p port</code> 查看指定IP的指定端口打开状态 或者 <code>nmap ip</code> 查看指定ip机器打开的全部端口 </p>
<h3 id="_24">参数</h3>
<ul>
<li>
<p>-p 指定端口（默认是TCP）</p>
<p><code>nmap 114.114.114.114 -p 23</code> 扫描23端口， <code>nmap 114.114.114.114 -p 1-1023</code> 扫描1到1024端口</p>
</li>
<li>
<p>-sU 扫描UDP端口</p>
</li>
<li>
<p>-sV 扫描软件类型，操作系统类型</p>
</li>
</ul>
<h2 id="crontab">crontab</h2>
<p>执行定时任务，可以以固定的时间间隔执行一些命令或者脚本文件。具体用法： crontab [提前写好的定时文件]</p>
<h2 id="_25">参数</h2>
<ul>
<li>-l 查看设置的定时任务</li>
<li>-r 删除设置的定时任务</li>
<li>-e 编辑设置的定时任务</li>
</ul>
<h2 id="_26">定时任务文件格式</h2>
<p><code>* * * * * command</code> <br />
<code>分钟 小时 天 星期 月 具体命令</code>。 </p>
<h2 id="_27">常用</h2>
<p><code>* * * * * command</code> 每分钟执行一次命令</p>
<h1 id="_28">其它</h1>
<h2 id="ls">ls</h2>
<p>浏览目录 </p>
<h3 id="_29">参数</h3>
<ul>
<li>-F 会在末尾加 <strong>/</strong> 标志是文件还是目录  </li>
<li>-R 递归打印每个目录  </li>
<li>通过 *、?、[a-i]、[!a] 实现过滤器。 比如<code>ls -l da[!t]a</code>列出第三个字符不是<code>t</code>的目录中的内容  </li>
<li>-i 查看文件的inode编号  </li>
</ul>
<h2 id="cp">cp</h2>
<p>拷贝文件</p>
<h3 id="_30">参数</h3>
<ul>
<li>-i 在拷贝的时候会判断新目录中是否已经存在同名文件，如果存在会询问。否则就会覆盖文件内容。比如 <code>cp -i test.md /home/js/</code> 如果<code>/homg/js/</code> 里面已经有<code>test.md</code>，就会提示。 <code>mv</code>/<code>rm</code>命令同理  </li>
<li>注意: 当将文件拷贝到一个不存在的目录时，如果在最后加上 <code>/</code>。 比如 <code>cp test.md /home/sj</code> 如果<code>sj</code>不存在并且后面还没有<code>/</code> 就会创建<code>sj</code>文件，并且将<code>test.md</code>的内容拷贝到<code>sj</code>中。如果在<code>sj</code>后面加上<code>/</code> 如果没有<code>sj</code>目录，就会提示错误信息，需要对比的是，如果将一个目录递归拷贝到另一个不存在的目录就可以实现。</li>
</ul>
<h2 id="tar">tar</h2>
<p>打包、压缩、解压文件</p>
<h3 id="_31">参数</h3>
<ul>
<li>
<p>-cf 创建(create)：将文件打包</p>
</li>
<li>
<p>-xf ：解包(extract)（打包的逆操作）</p>
</li>
<li>
<p>-z : 在打包/解包的同时，通过gzip进行压缩/解压</p>
</li>
<li>
<p>-tf 或者 --list: 列出(list)这个包中的内容</p>
</li>
<li>
<p>-rf 或者 --append: 往包中追加文件</p>
</li>
</ul>
<h3 id="_32">常用</h3>
<ul>
<li>将多个文件打包</li>
</ul>
<h2 id="todo">TODO</h2>
<ul>
<li>cd 切换目录</li>
<li>mkdir 创建文件夹。-p创建多级目录</li>
<li>touch 创建文件</li>
<li>rm 删除文件/文件夹</li>
<li>mv 移动文件/文件夹、修改文件名</li>
<li>less 分页查看文件内容。-N显示行号。 其它还有cat、tac</li>
<li>head 查看文件首部内容，默认前10行。</li>
<li>tail 查看文件尾部内容，默认后10行。一般加<code>-f</code>可以实时查看</li>
<li>chmod 修改文件/文件夹权限 <code>ugo rwx=421</code>。 一般加 <code>-R</code> 递归修改</li>
<li>kill 杀死进程。 一般加-9杀死某进程相关进程</li>
<li>alias 为命令创建别名。 比如 <code>alias ll='ls -l'</code> <strong>(注意: 等于号左右不能有空格)</strong></li>
<li>file 查看文件类型</li>
</ul>
<h1 id="_33">参考</h1>
<ul>
<li><a href="https://www.geeksforgeeks.org/linux-commands/">https://www.geeksforgeeks.org/linux-commands/</a></li>
<li><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/index.html">https://linuxtools-rst.readthedocs.io/zh_CN/latest/index.html</a></li>
</ul>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 JinShuai.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-11-01 17:28:39</p>
      </span>
    </div>

    
    
  </body>
</html>